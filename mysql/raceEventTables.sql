CREATE TABLE RACE_COMPETITORS
(
    COMPETITOR_ID INT UNSIGNED NOT NULL AUTO_INCREMENT,
    FIRST_NAME VARCHAR(128) NOT NULL,
    LAST_NAME VARCHAR(128) NOT NULL,
    BIRTHDAY DATE NOT NULL,
    PRIMARY KEY (COMPETITOR_ID)
) ENGINE = InnoDB;

CREATE TABLE RACE_COMPETITORS_EVENTOR
(
    EVENTOR_COMPETITOR_ID INT UNSIGNED NOT NULL,
    COMPETITOR_ID INT UNSIGNED NOT NULL,
    PRIMARY KEY (EVENTOR_COMPETITOR_ID),
    INDEX IDX_RACE_EVENTOR_COMPETITORS (COMPETITOR_ID),
    CONSTRAINT FK_RACE_EVENTOR_COMPETITORS FOREIGN KEY (COMPETITOR_ID)
    REFERENCES RACE_COMPETITORS(COMPETITOR_ID)
) ENGINE = InnoDB;

CREATE TABLE RACE_CLUBS
(
    CLUB_ID INT UNSIGNED NOT NULL AUTO_INCREMENT,
    CLUB_NAME VARCHAR(128) NOT NULL,
    EVENTOR_ORGANISATION_ID INT UNSIGNED NOT NULL,
    PRIMARY KEY (CLUB_ID)
) ENGINE = InnoDB;
INSERT INTO RACE_CLUBS (CLUB_NAME, EVENTOR_ORGANISATION_ID) VALUES ('Värend GN', 584);
INSERT INTO RACE_CLUBS (CLUB_NAME, EVENTOR_ORGANISATION_ID) VALUES ('OK Orion', 288);

CREATE TABLE RACE_COMPETITORS_CLUB
(
    CLUB_COMPETITOR_ID INT UNSIGNED NOT NULL AUTO_INCREMENT,
    COMPETITOR_ID INT UNSIGNED NOT NULL,
    CLUB_ID INT UNSIGNED NOT NULL,
    START_DATE DATE NOT NULL,
    END_DATE DATE,
    PRIMARY KEY (CLUB_COMPETITOR_ID),
    INDEX IDX_RACE_CLUB_COMPETITORS (COMPETITOR_ID),
    CONSTRAINT FK_RACE_CLUB_COMPETITORS FOREIGN KEY (COMPETITOR_ID)
    REFERENCES RACE_COMPETITORS(COMPETITOR_ID),
    INDEX IDX_RACE_CLUB_CLUB (CLUB_ID),
    CONSTRAINT FK_RACE_CLUB_CLUB FOREIGN KEY (CLUB_ID)
    REFERENCES RACE_CLUBS(CLUB_ID)
) ENGINE = InnoDB;

CREATE TABLE RACE_EVENT_CLASSIFICATION
(
    EVENT_CLASSIFICATION_ID CHAR NOT NULL,
    DESCRIPTION VARCHAR(128) NOT NULL,
    BASE_POINT INT NOT NULL,
    BASE_1000_POINT INT NOT NULL,
    OLD_BASE_POINT INT NOT NULL,
    OLD_POSITION_BASE_POINT INT NOT NULL,
    PRIMARY KEY (EVENT_CLASSIFICATION_ID)
) ENGINE = InnoDB;
INSERT INTO RACE_EVENT_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, BASE_POINT, 1000_BASE_POINT, OLD_BASE_POINT, OLD_POSITION_BASE_POINT) VALUES ('A', 'VM, EM', 120, 100, 130, 35);
INSERT INTO RACE_EVENT_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, BASE_POINT, 1000_BASE_POINT, OLD_BASE_POINT, OLD_POSITION_BASE_POINT) VALUES ('B', 'SM, NOM, Världscup', 115, 100, 120, 35);
INSERT INTO RACE_EVENT_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, BASE_POINT, 1000_BASE_POINT, OLD_BASE_POINT, OLD_POSITION_BASE_POINT) VALUES ('C', 'SM-Lång, GM, SSM', 100, 100, 100, 30);
INSERT INTO RACE_EVENT_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, BASE_POINT, 1000_BASE_POINT, OLD_BASE_POINT, OLD_POSITION_BASE_POINT) VALUES ('D', 'Elitserie, Juniorcup', 100, 100, 90, 30);
INSERT INTO RACE_EVENT_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, BASE_POINT, 1000_BASE_POINT, OLD_BASE_POINT, OLD_POSITION_BASE_POINT) VALUES ('E', 'DM, SM(Kval), SM(b-final), Internationella kval + b-finaler', 80, 100, 80, 25);
INSERT INTO RACE_EVENT_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, BASE_POINT, 1000_BASE_POINT, OLD_BASE_POINT, OLD_POSITION_BASE_POINT) VALUES ('F', 'Nationell tävling', 85, 100, 80, 20);
INSERT INTO RACE_EVENT_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, BASE_POINT, 1000_BASE_POINT, OLD_BASE_POINT, OLD_POSITION_BASE_POINT) VALUES ('G', 'Närtävling', 30, 60, 55, 10);
INSERT INTO RACE_EVENT_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, BASE_POINT, 1000_BASE_POINT, OLD_BASE_POINT, OLD_POSITION_BASE_POINT) VALUES ('H', 'Klubb- & Kommunmästerskap', 50, 60, 30, 10);

CREATE TABLE RACE_CLASS_CLASSIFICATION
(
    CLASS_CLASSIFICATION_ID INT UNSIGNED NOT NULL AUTO_INCREMENT,
    EVENT_CLASSIFICATION_ID CHAR NOT NULL,
    DESCRIPTION VARCHAR(128) NOT NULL,
    CLASSTYPE_SHORTNAME CHAR,
    AGE_UPPER_LIMIT INT,
    AGE_LOWER_LIMIT INT,
    DECREASE_BASE_POINT INT NOT NULL,
    DECREASE_BASE_1000_POINT INT NOT NULL,
    DECREASE_OLD_BASE_POINT INT NOT NULL,
    PRIMARY KEY (CLASS_CLASSIFICATION_ID),
    INDEX IDX_RACE_CLASS_EVENT_CLASSIFICATION (EVENT_CLASSIFICATION_ID),
    CONSTRAINT FK_RACE_CLASS_EVENT_CLASSIFICATION FOREIGN KEY (EVENT_CLASSIFICATION_ID)
    REFERENCES RACE_EVENT_CLASSIFICATION(EVENT_CLASSIFICATION_ID)
) ENGINE = InnoDB;
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('A', 'Senior', 0, 0, 0);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, AGE_LOWER_LIMIT, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('A', 'Veteran', 35, 30, 0, 0);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, AGE_UPPER_LIMIT, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('A', 'Junior', 20, 15, 0, 0);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('B', 'Senior', 0, 0, 0);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, AGE_LOWER_LIMIT, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('B', 'Veteran', 35, 30, 0, 0);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, AGE_UPPER_LIMIT, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('B', 'Junior', 20, 15, 0, 0);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, AGE_UPPER_LIMIT, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('B', 'Ungdom', 16, 30, 0, 0);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('C', 'Senior', 0, 0, 0);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, AGE_LOWER_LIMIT, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('C', 'Veteran', 35, 20, 0, 0);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, AGE_UPPER_LIMIT, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('C', 'Junior', 20, 10, 0, 0);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, AGE_UPPER_LIMIT, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('C', 'Ungdom', 16, 15, 0, 0);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('D', 'Senior', 0, 0, 0);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, AGE_LOWER_LIMIT, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('D', 'Veteran', 35, 20, 0, 0);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, AGE_UPPER_LIMIT, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('D', 'Junior', 20, 10, 0, 0);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, AGE_UPPER_LIMIT, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('D', 'Ungdom', 16, 15, 0, 0);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, CLASSTYPE_SHORTNAME, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('F', 'Elit', 'E', 0, 0, 0);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, CLASSTYPE_SHORTNAME, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('F', 'Huvudklass', 'T', 15, 0, 10);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, CLASSTYPE_SHORTNAME, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('F', 'Motion/Lätt', 'M', 45, 0, 25);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, CLASSTYPE_SHORTNAME, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('F', 'Inskolning', 'I', 45, 70, 25);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, CLASSTYPE_SHORTNAME, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('F', 'Öppen bana', 'Ö', 45, 70, 30);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, CLASSTYPE_SHORTNAME, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('G', 'Huvudklass', 'T', 0, 0, 0);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, CLASSTYPE_SHORTNAME, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('G', 'Motion/Lätt', 'M', 10, 0, 15);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, CLASSTYPE_SHORTNAME, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('G', 'Inskolning', 'I', 10, 30, 15);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, CLASSTYPE_SHORTNAME, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('G', 'Öppen bana', 'Ö', 10, 30, 25);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, CLASSTYPE_SHORTNAME, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('H', 'Huvudklass', 'T', 0, 0, 0);
INSERT INTO RACE_CLASS_CLASSIFICATION (EVENT_CLASSIFICATION_ID, DESCRIPTION, CLASSTYPE_SHORTNAME, DECREASE_BASE_POINT, DECREASE_BASE_1000_POINT, DECREASE_OLD_BASE_POINT)
    VALUES ('H', 'Övriga klasser', 'Ö', 30, 30, 10);

CREATE TABLE RACE_EVENT
(
    EVENT_ID INT UNSIGNED NOT NULL AUTO_INCREMENT,
    EVENTOR_ID INT UNSIGNED NOT NULL,
    EVENTOR_RACE_ID INT UNSIGNED,
    NAME VARCHAR(128) NOT NULL,
    ORGANISER_NAME VARCHAR(128) NOT NULL,
    RACEDATE DATE NOT NULL,
    RACETIME DATETIME,
    EVENT_CLASSIFICATION_ID CHAR NOT NULL,
    RACE_LIGHT_CONDITION VARCHAR(32),
    RACE_DISTANCE VARCHAR(32),
    PRIMARY KEY (EVENT_ID),
    INDEX IDX_RACE_EVENT_CLASSIFICATION (EVENT_CLASSIFICATION_ID),
    CONSTRAINT FK_RACE_EVENT_CLASSIFICATION FOREIGN KEY (EVENT_CLASSIFICATION_ID)
    REFERENCES RACE_EVENT_CLASSIFICATION(EVENT_CLASSIFICATION_ID)
) ENGINE = InnoDB;

CREATE TABLE RACE_EVENT_RESULTS
(
    RESULT_ID INT UNSIGNED NOT NULL AUTO_INCREMENT,
    EVENT_ID INT UNSIGNED NOT NULL,
    COMPETITOR_ID INT UNSIGNED NOT NULL,
    CLASS_NAME VARCHAR(64) NOT NULL,
    DEVIANT_EVENT_CLASSIFICATION_ID CHAR,
    CLASS_CLASSIFICATION_ID INT UNSIGNED NOT NULL,
    LENGTH_IN_METER INT,
    FAILED_REASON VARCHAR(64),
    COMPETITOR_TIME TIME,
    WINNER_TIME TIME,
    SECOND_TIME TIME,
    POSITION INT,
    NOF_STARTS_IN_CLASS INT,
    FEE_TO_CLUB DECIMAL(10, 2),
    AWARD VARCHAR(16),
    POINTS INT,
    POINTS_OLD INT,
    POINTS_1000 INT,
    TEAM_RESULT_ID INT,
    PRIMARY KEY (RESULT_ID),
    INDEX IDX_RACE_EVENT_RESULTS_EVENT (EVENT_ID),
    CONSTRAINT FK_RACE_EVENT_RESULTS_EVENT FOREIGN KEY (EVENT_ID)
    REFERENCES RACE_EVENT(EVENT_ID),
    INDEX IDX_RACE_RESULT_CLASS_CLASSIFICATION (CLASS_CLASSIFICATION_ID),
    CONSTRAINT FK_RACE_RESULT_CLASS_CLASSIFICATION FOREIGN KEY (CLASS_CLASSIFICATION_ID)
    REFERENCES RACE_CLASS_CLASSIFICATION(CLASS_CLASSIFICATION_ID)
) ENGINE = InnoDB;

CREATE TABLE RACE_EVENT_RESULTS_MULTI_DAY
(
    MULTI_DAY_RESULT_ID INT UNSIGNED NOT NULL AUTO_INCREMENT,
    RESULT_ID INT UNSIGNED NOT NULL,
    COMPETITOR_ID INT UNSIGNED NOT NULL,
    CLASS_NAME VARCHAR(64) NOT NULL,
    LENGTH_IN_METER INT,
    FAILED_REASON VARCHAR(64),
    COMPETITOR_TIME TIME,
    WINNER_TIME TIME,
    SECOND_TIME TIME,
    POSITION INT,
    NOF_STARTS_IN_CLASS INT,
    STAGE INT,
    TOTAL_STAGES INT,
    PRIMARY KEY (MULTI_DAY_RESULT_ID),
    INDEX IDX_RACE_EVENT_RESULTS_MULTI_DAY (RESULT_ID),
    CONSTRAINT FK_RACE_EVENT_RESULTS_MULTI_DAY FOREIGN KEY (RESULT_ID)
    REFERENCES RACE_EVENT_RESULTS(RESULT_ID)
) ENGINE = InnoDB;

CREATE TABLE RACE_EVENT_RESULTS_TEAM
(
    TEAM_RESULT_ID INT UNSIGNED NOT NULL AUTO_INCREMENT,
    EVENT_ID INT UNSIGNED NOT NULL,
    CLASS_NAME VARCHAR(64) NOT NULL,
    CLUB_TEAM_NUMBER INT NOT NULL,
    COMPETITOR_ID INT UNSIGNED NOT NULL,
    LENGTH_IN_METER INT,
    FAILED_REASON VARCHAR(64),
    COMPETITOR_TIME TIME,
    WINNER_TIME TIME,
    SECOND_TIME TIME,
    POSITION INT,
    NOF_STARTS_IN_CLASS INT,
    STAGE INT,
    TOTAL_STAGES INT,
    RACE_LIGHT_CONDITION VARCHAR(32),
    PRIMARY KEY (TEAM_RESULT_ID),
    INDEX IDX_RACE_EVENT_RESULTS_TEAM_EVENT (EVENT_ID),
    CONSTRAINT FK_RACE_EVENT_RESULTS_TEAM_EVENT FOREIGN KEY (EVENT_ID)
    REFERENCES RACE_EVENT(EVENT_ID)
) ENGINE = InnoDB;